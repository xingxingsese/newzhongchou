<table sqlname="ibep_form_data_records" dummyPk="id" physicalName="ibep_form_data_records.xml">

<operation name="selectByUserIdAndServiceCode" multiplicity="many" >
    <extraparams>
        <param name="ipayUserId" javatype="java.lang.String"/>
        <param name="serviceCode" javatype="java.lang.String"/>
    </extraparams>
    <sql>
        <![CDATA[
        SELECT
            id,
		    gmt_create,
		    gmt_modified,
		    service_code,
		    ipay_user_id,
		    form_data,
		    status,
		    env,
		    tnt_inst_id,
		    extend_info
	    FROM
	        ibep_form_data_records

            ]]>
    </sql>
    <sqlmap>
        <![CDATA[
        SELECT
            id,
		    gmt_create,
		    gmt_modified,
		    service_code,
		    ipay_user_id,
		    form_data,
		    status,
		    env,
		    tnt_inst_id,
		    extend_info
	    FROM
	        ibep_form_data_records
                 WHERE
                    ipay_user_id = #ipayUserId#
                 And
                    service_code = #serviceCode#
                 FOR UPDATE
		    ]]>
    </sqlmap>
</operation>


    <operation name="updateById" paramtype="object">
        <sql>
            <![CDATA[
                UPDATE
                    ibep_form_data_records
                SET
                    gmt_modified = CURRENT_TIMESTAMP
                WHERE
                    id = ?


            ]]>
        </sql>
        <sqlmap>
            <![CDATA[
                UPDATE ibep_form_data_records
                SET
					gmt_modified = CURRENT_TIMESTAMP
					<dynamic prepend=","><isNotNull property="serviceCode">service_code = #companyId#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="ipayUserId">user_id = #ipay_user_id#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="formData">apply_type = #form_data#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="status">legal_name = #status#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="env">registration_no = #env#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="tntInstId">province = #tnt_inst_id#</isNotNull></dynamic>
					<dynamic prepend=","><isNotNull property="extendInfo">company_type = #extend_info#</isNotNull></dynamic>

                WHERE id = #id#
            ]]>
        </sqlmap>
    </operation>


    <operation name="insert" paramtype="object">
        <sql>
            <![CDATA[
                INSERT INTO
                    ibep_form_data_records
                    (id,gmt_create,gmt_modified,service_code,ipay_user_id,form_data,status,env,tnt_inst_id,extend_info)
                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)
		    ]]>
        </sql>
    </operation>

</table>
